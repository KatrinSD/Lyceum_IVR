{% extends "base.html" %}

{% block title %}
Post
{% endblock %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{url_for('.static', filename='signin.css')}}">
{% endblock %}

{% block content %}
<div class="container">

<h1> Post:</h1>

	<a class="nav-link" href={{ url_for("profile", user_id=post.user_id) }}><h3>{{ post.username }}</h3></a>
	<h4> {{ post.header }} </h4>
	<p>Created on: {{ format_datetime(post.date_created) }}</p>
	<p> {{ post.body }} </p>
	<p> {{ tags }} </p>
	<h5> Likes: {{ post.number_of_likes }} </h5>
	<h5> Comments: {{ post.number_of_comments }} </h5>
	<form class="form-signin" method = "POST" action = {{ url_for("post", post_id=post.id) }}>
		<h2 class="form-signin-heading">Write a comment</h2>
		{{ form.hidden_tag() }}
		{{ wtf.form_field(form.body) }}
		<button class="btn btn-lg btn-primary btn-block" type="submit">Write</button>
	</form>
	{% if post_image_ids %}
		<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
		  <!-- Indicators -->
		  <ol class="carousel-indicators">
		  	{% for image_id in post_image_ids %}
				<li data-target="#myCarousel" data-slide-to="{{ loop.index }}" class="{% if loop.index == 1 %}active{% endif %}"></li>
		  	{% endfor %}
			<!--<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
			<li data-target="#myCarousel" data-slide-to="1"></li>
			<li data-target="#myCarousel" data-slide-to="2"></li>-->
		  </ol>

		  <!-- Wrapper for slides -->
		  <div class="carousel-inner">
		  	{% for image_id in post_image_ids %}
				<div class="item{% if loop.index == 1 %} active{% endif %}">
			  		<img src='{{ url_for("static", filename=image_id)}}'>
				</div>
			{% endfor %}
		  </div>>

		  <!-- Left and right controls -->
		  <a class="left carousel-control" href="#myCarousel" data-slide="prev">
			<span class="glyphicon glyphicon-chevron-left"></span>
			<span class="sr-only">Previous</span>
		  </a>
		  <a class="right carousel-control" href="#myCarousel" data-slide="next">
			<span class="glyphicon glyphicon-chevron-right"></span>
			<span class="sr-only">Next</span>
		  </a>
		</div>
	{% endif %}
	{% for comment in post_comments %}
		<a class="nav-link" href={{ url_for("profile", user_id=comment.user_id) }}><h3>{{ comment.username }}</h3></a>

		{% if comment.username == username %}
			<form class="form-delete-comment" method="POST" action={{ url_for("delete_comment", comment_id=comment.id) }}>
				<button class="btn btn-danger glyphicon glyphicon-remove" type="submit"></button>
			</form>
		{% endif %}
		<p>Commented on {{ format_datetime(comment.date_created) }}</p>
		<p> {{ comment.body }} </p>
	{% endfor %}



</div> <!-- /container -->
{% endblock %}
